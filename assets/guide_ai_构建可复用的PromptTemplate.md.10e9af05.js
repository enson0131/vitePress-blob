import{_ as s,o as a,c as n,Q as p}from"./chunks/framework.b6910bb2.js";const u=JSON.parse('{"title":"æ„å»ºå¯å¤ç”¨çš„ PromptTemplate","description":"","frontmatter":{},"headers":[],"relativePath":"guide/ai/æ„å»ºå¯å¤ç”¨çš„PromptTemplate.md","filePath":"guide/ai/æ„å»ºå¯å¤ç”¨çš„PromptTemplate.md","lastUpdated":1748259357000}'),l={name:"guide/ai/æ„å»ºå¯å¤ç”¨çš„PromptTemplate.md"},o=p(`<h1 id="æ„å»ºå¯å¤ç”¨çš„-prompttemplate" tabindex="-1">æ„å»ºå¯å¤ç”¨çš„ PromptTemplate <a class="header-anchor" href="#æ„å»ºå¯å¤ç”¨çš„-prompttemplate" aria-label="Permalink to &quot;æ„å»ºå¯å¤ç”¨çš„ PromptTemplate&quot;">â€‹</a></h1><p>Prompt æ˜¯å¤§æ¨¡å‹çš„æ ¸å¿ƒï¼Œä¼ ç»Ÿçš„æ–¹å¼ä¸€èˆ¬æ˜¯é€šè¿‡å­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²æ¨¡ç‰ˆæ¥æ„å»º Promptï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸å¤Ÿçµæ´»ï¼Œä¹Ÿä¸å¤Ÿæ˜“ç”¨ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒLangChain å¼•å…¥äº† PromptTemplateï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ Prompt æ¨¡ç‰ˆï¼Œå¯ä»¥é€šè¿‡å‚æ•°åŒ–çš„æ–¹å¼æ¥æ„å»º Promptã€‚</p><h3 id="åŸºç¡€çš„-prompt-æ¨¡ç‰ˆä½¿ç”¨" tabindex="-1">åŸºç¡€çš„ Prompt æ¨¡ç‰ˆä½¿ç”¨ <a class="header-anchor" href="#åŸºç¡€çš„-prompt-æ¨¡ç‰ˆä½¿ç”¨" aria-label="Permalink to &quot;åŸºç¡€çš„ Prompt æ¨¡ç‰ˆä½¿ç”¨&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// åŸºç¡€çš„ Prompt æ¨¡ç‰ˆä½¿ç”¨</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { PromptTemplate } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@langchain/core/prompts&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">greetingPrompt</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">PromptTemplate</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    inputVariables: [], </span><span style="color:#6A737D;">// ä¸ä¼ å…¥ä»»ä½•å˜é‡</span></span>
<span class="line"><span style="color:#E1E4E8;">    template: </span><span style="color:#9ECBFF;">&#39;hello world&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">formattedGreetingPrompt</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> greetingPrompt.</span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(formattedGreetingPrompt); </span><span style="color:#6A737D;">// Prompt æ¨¡ç‰ˆ ğŸ‘‰ hello world</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// -----------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">personalizedGreetingPrompt</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">PromptTemplate</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    inputVariables: [</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// ä¼ å…¥ä¸€ä¸ªå˜é‡</span></span>
<span class="line"><span style="color:#E1E4E8;">    template: </span><span style="color:#9ECBFF;">&quot;helloï¼Œ{name}&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">formattedPersonalizedGreetingPrompt</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> personalizedGreetingPrompt.</span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&quot;enson&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(formattedPersonalizedGreetingPrompt); </span><span style="color:#6A737D;">// å˜é‡ Prompt æ¨¡ç‰ˆ ğŸ‘‰ helloï¼Œenson</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// -----------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è¯­æ³•ç³–æ¨¡ç‰ˆ</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">autoInferTemplate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> PromptTemplate.</span><span style="color:#B392F0;">fromTemplate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;helloï¼Œ{name}&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">formattedAutoInferTemplate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> autoInferTemplate.</span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&quot;enson&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(formattedAutoInferTemplate)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// åŸºç¡€çš„ Prompt æ¨¡ç‰ˆä½¿ç”¨</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { PromptTemplate } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@langchain/core/prompts&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">greetingPrompt</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PromptTemplate</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    inputVariables: [], </span><span style="color:#6A737D;">// ä¸ä¼ å…¥ä»»ä½•å˜é‡</span></span>
<span class="line"><span style="color:#24292E;">    template: </span><span style="color:#032F62;">&#39;hello world&#39;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">formattedGreetingPrompt</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> greetingPrompt.</span><span style="color:#6F42C1;">format</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(formattedGreetingPrompt); </span><span style="color:#6A737D;">// Prompt æ¨¡ç‰ˆ ğŸ‘‰ hello world</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// -----------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">personalizedGreetingPrompt</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PromptTemplate</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    inputVariables: [</span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// ä¼ å…¥ä¸€ä¸ªå˜é‡</span></span>
<span class="line"><span style="color:#24292E;">    template: </span><span style="color:#032F62;">&quot;helloï¼Œ{name}&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">formattedPersonalizedGreetingPrompt</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> personalizedGreetingPrompt.</span><span style="color:#6F42C1;">format</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&quot;enson&quot;</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(formattedPersonalizedGreetingPrompt); </span><span style="color:#6A737D;">// å˜é‡ Prompt æ¨¡ç‰ˆ ğŸ‘‰ helloï¼Œenson</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// -----------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è¯­æ³•ç³–æ¨¡ç‰ˆ</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">autoInferTemplate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> PromptTemplate.</span><span style="color:#6F42C1;">fromTemplate</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;helloï¼Œ{name}&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">formattedAutoInferTemplate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> autoInferTemplate.</span><span style="color:#6F42C1;">format</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&quot;enson&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(formattedAutoInferTemplate)</span></span></code></pre></div><p>åŸºç¡€çš„ Prompt æ¨¡ç‰ˆçš„ä½¿ç”¨ç±»ä¼¼äºå­—ç¬¦ä¸²æ¨¡ç‰ˆï¼Œåªæ˜¯åœ¨å­—ç¬¦ä¸²ä¸­åŠ å…¥äº†å˜é‡ï¼Œç„¶åé€šè¿‡ <code>format</code> æ–¹æ³•ä¼ å…¥å˜é‡çš„å€¼ï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ Prompt æ¨¡ç‰ˆã€‚</p><h3 id="chat-prompt-æ¨¡ç‰ˆä½¿ç”¨" tabindex="-1">Chat Prompt æ¨¡ç‰ˆä½¿ç”¨ <a class="header-anchor" href="#chat-prompt-æ¨¡ç‰ˆä½¿ç”¨" aria-label="Permalink to &quot;Chat Prompt æ¨¡ç‰ˆä½¿ç”¨&quot;">â€‹</a></h3><p>ç»è¿‡äº†å‰é¢çš„åŸºç¡€ Prompt æ¨¡ç‰ˆçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨ Chat Prompt æ¨¡ç‰ˆï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œä½¿ç”¨ Chat Prompt æ¨¡ç‰ˆçš„åœºæ™¯æ›´å¤šã€‚</p><p>å› ä¸ºåœ¨å’Œå„ç§æ¨¡å‹èŠå¤©äº¤äº’æ—¶ï¼Œåœ¨æ„å»ºä¿¡æ¯ä¸ä»…éœ€è¦åŒ…å«ä¸Šä¸‹æ–‡å†…å®¹ï¼Œè¿˜éœ€è¦åŒ…å«å¯¹åº”çš„è§’è‰²ä¿¡æ¯ã€‚ä¾‹å¦‚è¿™æ¡ä¿¡æ¯æ˜¯ç”± äººç±»ã€AI è¿˜æ˜¯ç»™ ChatBot æŒ‡å®šçš„ System ä¿¡æ¯ã€‚</p><p>è¿™ç§ç»“æ„åŒ–çš„ä¿¡æ¯æœ‰åŠ©äºæ¨¡å‹æ›´å¥½çš„ç†è§£ä¸Šä¸‹æ–‡ï¼Œä»è€Œæ›´å¥½çš„å›ç­”é—®é¢˜ã€‚</p><p>LangChain æä¾›äº†å‡ ç§ä¸èŠå¤©ç›¸å…³çš„æç¤ºæ¨¡ç‰ˆç±»ï¼Œå¦‚ <code>SystemMessagePromptTemplate</code>ã€<code>HumanMessagePromptTemplate</code>ã€<code>AIMessagePromptTemplate</code> ä»¥åŠ <code>ChatPromptTemplate</code> ç­‰ã€‚</p><p>å‰é¢ä¸‰ä¸ªå¯¹åº”ç€ä¸åŒçš„è§’è‰²:</p><ul><li><code>system</code> è§’è‰²çš„æ¶ˆæ¯é€šå¸¸ç”¨äºè®¾ç½®å¯¹è¯çš„ä¸Šä¸‹æ–‡æˆ–æŒ‡å®šæ¨¡å‹é‡‡å–ç‰¹å®šçš„è¡Œä¸ºæ¨¡å¼ã€‚è¿™äº›æ¶ˆæ¯ä¸ä¼šç›´æ¥æ˜¾ç¤ºåœ¨å¯¹è¯ä¸­ï¼Œä½†å®ƒä»¬å¯¹æ¨¡å‹çš„è¡Œä¸ºæœ‰æŒ‡å¯¼ä½œç”¨ã€‚ å¯ä»¥ç†è§£æˆæ¨¡å‹çš„å…ƒä¿¡æ¯ï¼Œæƒé‡éå¸¸é«˜ï¼Œåœ¨è¿™é‡Œæœ‰æ•ˆçš„æ„å»º prompt èƒ½å–å¾—éå¸¸å¥½çš„æ•ˆæœã€‚</li><li><code>user</code> è§’è‰²ä»£è¡¨çœŸå®ç”¨æˆ·åœ¨å¯¹è¯ä¸­çš„å‘è¨€ã€‚è¿™äº›æ¶ˆæ¯é€šå¸¸æ˜¯é—®é¢˜ã€æŒ‡ä»¤æˆ–è€…è¯„è®ºï¼Œåæ˜ äº†ç”¨æˆ·çš„æ„å›¾å’Œéœ€æ±‚ã€‚</li><li><code>assistant</code> è§’è‰²çš„æ¶ˆæ¯ä»£è¡¨ AI æ¨¡å‹çš„å›å¤ã€‚è¿™äº›æ¶ˆæ¯æ˜¯æ¨¡å‹æ ¹æ® system çš„æŒ‡ç¤ºå’Œ user çš„è¾“å…¥ç”Ÿæˆçš„ã€‚</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»¥ <code>ç¿»è¯‘</code> çš„åœºæ™¯ä¸ºä¾‹ï¼Œæ¥æ„å»ºä¸€ä¸ª Chat Prompt æ¨¡ç‰ˆã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { SystemMessagePromptTemplate } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@langchain/core/prompts&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { HumanMessagePromptTemplate } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@langchain/core/prompts&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ChatPromptTemplate } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@langchain/core/prompts&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { StringOutputParser } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@langchain/core/output_parsers&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Ollama } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@langchain/community/llms/ollama&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">systemTemplate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘å‘˜ï¼Œä½ çš„ä»»åŠ¡æ˜¯å°†æ–‡æœ¬ä»{source_lang}ç¿»è¯‘æˆ{target_lang}ã€‚&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">humanTemplate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;è¯·ç¿»è¯‘è¿™å¥è¯ï¼š{text}&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">chatPrompt2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ChatPromptTemplate.</span><span style="color:#B392F0;">fromMessages</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">  [</span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">, systemTemplate],</span></span>
<span class="line"><span style="color:#E1E4E8;">  [</span><span style="color:#9ECBFF;">&quot;human&quot;</span><span style="color:#E1E4E8;">, humanTemplate],</span></span>
<span class="line"><span style="color:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">outputParser</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">StringOutputParser</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">// è¾“å‡ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">chatModel</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Ollama</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    baseUrl: </span><span style="color:#9ECBFF;">&quot;http://localhost:11434&quot;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">    model: </span><span style="color:#9ECBFF;">&quot;llama3&quot;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">chain</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> chatPrompt2.</span><span style="color:#B392F0;">pipe</span><span style="color:#E1E4E8;">(chatModel).</span><span style="color:#B392F0;">pipe</span><span style="color:#E1E4E8;">(outputParser);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">res</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> chain.</span><span style="color:#B392F0;">invoke</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    source_lang: </span><span style="color:#9ECBFF;">&quot;ä¸­æ–‡&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    target_lang: </span><span style="color:#9ECBFF;">&quot;è‹±è¯­&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    text: </span><span style="color:#9ECBFF;">&quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(res);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { SystemMessagePromptTemplate } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@langchain/core/prompts&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { HumanMessagePromptTemplate } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@langchain/core/prompts&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ChatPromptTemplate } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@langchain/core/prompts&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { StringOutputParser } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@langchain/core/output_parsers&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Ollama } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@langchain/community/llms/ollama&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">systemTemplate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘å‘˜ï¼Œä½ çš„ä»»åŠ¡æ˜¯å°†æ–‡æœ¬ä»{source_lang}ç¿»è¯‘æˆ{target_lang}ã€‚&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">humanTemplate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;è¯·ç¿»è¯‘è¿™å¥è¯ï¼š{text}&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">chatPrompt2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ChatPromptTemplate.</span><span style="color:#6F42C1;">fromMessages</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">  [</span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">, systemTemplate],</span></span>
<span class="line"><span style="color:#24292E;">  [</span><span style="color:#032F62;">&quot;human&quot;</span><span style="color:#24292E;">, humanTemplate],</span></span>
<span class="line"><span style="color:#24292E;">]);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">outputParser</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">StringOutputParser</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// è¾“å‡ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">chatModel</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Ollama</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    baseUrl: </span><span style="color:#032F62;">&quot;http://localhost:11434&quot;</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#24292E;">    model: </span><span style="color:#032F62;">&quot;llama3&quot;</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">chain</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> chatPrompt2.</span><span style="color:#6F42C1;">pipe</span><span style="color:#24292E;">(chatModel).</span><span style="color:#6F42C1;">pipe</span><span style="color:#24292E;">(outputParser);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> chain.</span><span style="color:#6F42C1;">invoke</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    source_lang: </span><span style="color:#032F62;">&quot;ä¸­æ–‡&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    target_lang: </span><span style="color:#032F62;">&quot;è‹±è¯­&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    text: </span><span style="color:#032F62;">&quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(res);</span></span></code></pre></div><h3 id="ç»„åˆå¤šä¸ª-prompt-æ¨¡ç‰ˆ" tabindex="-1">ç»„åˆå¤šä¸ª Prompt æ¨¡ç‰ˆ <a class="header-anchor" href="#ç»„åˆå¤šä¸ª-prompt-æ¨¡ç‰ˆ" aria-label="Permalink to &quot;ç»„åˆå¤šä¸ª Prompt æ¨¡ç‰ˆ&quot;">â€‹</a></h3><p>å¯ä»¥é€šè¿‡ <code>PipelinePromptTemplate</code> ç»„åˆå¤šä¸ª Prompt æ¨¡ç‰ˆï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„å¤ç”¨å’Œç®¡ç† Prompt æ¨¡ç‰ˆã€‚</p><p>åœ¨ PipelinePromptTemplate æœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µï¼š</p><ul><li><code>pipelinePrompts</code>ï¼Œä¸€ç»„ <code>object</code>ï¼Œæ¯ä¸ª object è¡¨ç¤º prompt è¿è¡Œåèµ‹å€¼ç»™ name å˜é‡</li><li><code>finalPrompt</code>ï¼Œè¡¨ç¤ºæœ€ç»ˆè¾“å‡ºçš„ prompt</li></ul>`,18),e=[o];function t(c,r,E,y,i,m){return a(),n("div",null,e)}const d=s(l,[["render",t]]);export{u as __pageData,d as default};
