# 如何绘制一个图形

上一节中，大致了解了 Fabric 的内部结构，并且知道 Fabric.js 拥有俩层 Canvas。

上层 Canvas 称之为动态层，用于处理交互相关以及事件绑定

下层 Canvas 称之为静态层，用于获取数据，通过数据绘制图形

之前有编写过 React 的同学应该对父子组件的单向数据流有一定的印象，而 Fabric.js 的分层结构设计就很类似于这种单向数据流思想，

动态层用于获取数据输出到静态层进行渲染。

在这一节中，我们将以绘制矩形为例，了解 Fabric.js 是如何实现矩形的绘制的？

## Fabric.js 是如何绘制矩形的

在 Fabric.js 中绘制矩形也非常简单，只需要初始化画布，添加矩形对象即可，代码如下👇:

```html
<!-- html -->
<canvas id="canvas"></canvas>
```

```js
// js
const canvas = new fabric.Canvas('canvas');
canvas.setWidth(window.innerWidth);
canvas.setHeight(window.innerHeight);


const rect = new fabric.Rect({
    left: 0, //距离左边的距离
    top: 0, //距离上边的距离
    fill: "red", //填充的颜色
    width: 200, //矩形宽度
    height: 200, //矩形高度
});

canvas.add(rect);
```

通过代码可以看到，Fabric.js 通过实例化对象的方式将 Canvas 的绘制逻辑进行的隐藏，使用者只需要关心传入对应的参数即可在 Canvas 中绘制出相对应的元素。

## 初始化画布

// new Canvas 做了什么、初始化上层画布、下层画布



## 实例化对象

// fabric.Object 是元素的根类型、Rect 继承 fabric.Object，实现了自己的 render 方法
// 在执行 canvas.add 的时候，会将元素 push 到一个数据数组内，进行遍历，通过执行fabric.Object.render 方法, 将元素绘制到底层 Canvas 中


