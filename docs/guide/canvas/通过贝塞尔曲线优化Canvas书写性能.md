# 通过贝塞尔曲线解决 Canvas 书写的圆滑问题

## 前言
书接上回，当我们实现了一个自由书写的 Canvas 画板后，我们发现，当我们书写的点数越多时，画板的性能就越差，
这是因为我们每次都是将所有的点都重新绘制了一遍，这样的性能是很差的，那么我们如何优化这个性能呢？

## 正文

### 贝塞尔曲线
贝塞尔曲线是一种数学曲线，常见的有: 线性贝塞尔曲线、二次贝塞尔曲线、三次贝塞尔曲线等，
它可以用来实现平滑曲线，我们可以通过贝塞尔曲线以相对圆滑的方式来优化我们的 Canvas 书写。

### 优化思路
我们可以通过贝塞尔曲线来优化我们的 Canvas 书写性能，我们可以将鼠标移动的点集通过贝塞尔曲线来优化，这样就可以减少我们绘制的点数，从而提高性能。

在 Canvas2D API 中有一个方法叫做 `quadraticCurveTo` 用于创建二次贝塞尔曲线。它需要两个点：一个控制点和一个终点。曲线从当前的绘图位置开始绘制，并以控制点为参考，向终点绘制曲线。

这个方法的语法是：context.quadraticCurveTo(cp1x, cp1y, x, y);

其中：

    cp1x 和 cp1y 是控制点。
    x 和 y 是终点的 x 和 y 坐标。

这个方法不会直接绘制曲线，而是将曲线添加到当前的路径中。要在画布上实际绘制曲线，你需要使用 stroke 或 fill 方法

### 优化实现
我们可以通过贝塞尔曲线，获取俩点坐标的中点，然后将中点作为控制点，将两个点作为起始点和终点，这样就可以实现平滑曲线了。


将两个点的中点作为控制点的选择通常用于创建平滑的曲线，该方法可以确保曲线通过两个点并且在两个点之间有一个平滑的拐角。
方法的依据是曲线的切线在控制点处与曲线的切线在两个点的中点处平行，从而使曲线过渡更加平滑。

## 参考文章
- https://github.com/chenxiaoyao6228/fe-notes/blob/main/Canvas/canvas%E4%BD%BF%E7%94%A8%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF%E4%BC%98%E5%8C%96%E8%87%AA%E7%94%B1%E7%94%BB%E7%AC%94%E5%B9%B6%E6%8E%A2%E7%A9%B6%E5%85%B6%E5%8E%9F%E7%90%86.md